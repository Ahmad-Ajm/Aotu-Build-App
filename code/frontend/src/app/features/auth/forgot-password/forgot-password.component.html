<div class="forgot-password-container">
  <mat-card class="forgot-password-card">
    <mat-card-header>
      <mat-card-title>
        <h1 class="forgot-password-title">استعادة كلمة المرور</h1>
      </mat-card-title>
      <mat-card-subtitle>
        <p class="forgot-password-subtitle">أدخل بريدك الإلكتروني لإرسال رابط إعادة تعيين كلمة المرور</p>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div *ngIf="!emailSent">
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
          
          <!-- البريد الإلكتروني -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>البريد الإلكتروني</mat-label>
            <input matInput formControlName="email" type="email" placeholder="example@domain.com">
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched">
              {{ getErrorMessage('email') }}
            </mat-error>
            <mat-hint>أدخل البريد الإلكتروني المرتبط بحسابك</mat-hint>
          </mat-form-field>

          <!-- زر إرسال -->
          <button mat-raised-button color="primary" type="submit" 
                  class="forgot-password-button full-width" 
                  [disabled]="forgotPasswordForm.invalid || isLoading">
            <span *ngIf="!isLoading">إرسال رابط إعادة التعيين</span>
            <mat-spinner diameter="20" *ngIf="isLoading"></mat-spinner>
          </button>

        </form>
      </div>

      <!-- رسالة النجاح بعد إرسال البريد -->
      <div *ngIf="emailSent" class="success-message">
        <mat-card class="success-card">
          <mat-card-header>
            <mat-card-title>
              <h2 class="success-title">تم إرسال رابط إعادة التعيين</h2>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="success-content">
              <mat-icon class="success-icon">check_circle</mat-icon>
              <p class="success-text">
                تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني. 
                يرجى التحقق من صندوق الوارد الخاص بك واتباع التعليمات لإعادة تعيين كلمة المرور.
              </p>
              <p class="success-note">
                ملاحظة: قد يستغرق وصول البريد الإلكتروني بضع دقائق. 
                إذا لم تجد البريد، يرجى التحقق من مجلد البريد العشوائي (Spam).
              </p>
            </div>
          </mat-card-content>
          <mat-card-actions class="success-actions">
            <button mat-button color="primary" (click)="resetForm()">
              <mat-icon>refresh</mat-icon>
              إعادة تعيين نموذج آخر
            </button>
            <button mat-raised-button color="primary" (click)="goToLogin()">
              <mat-icon>login</mat-icon>
              تسجيل الدخول
            </button>
          </mat-card-actions>
        </mat-card>
      </div>

    </mat-card-content>

    <mat-card-actions class="forgot-password-actions">
      <div class="auth-links">
        <p>تذكرت كلمة المرور؟ 
          <button mat-button color="primary" (click)="goToLogin()">تسجيل الدخول</button>
        </p>
        <p>ليس لديك حساب؟ 
          <button mat-button color="primary" (click)="goToRegister()">إنشاء حساب جديد</button>
        </p>
      </div>
    </mat-card-actions>
  </mat-card>

  <!-- معلومات إضافية -->
  <div class="forgot-password-info">
    <mat-card class="info-card">
      <mat-card-header>
        <mat-card-title>
          <h3>معلومات مهمة</h3>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-list-item>
            <mat-icon matListItemIcon>info</mat-icon>
            <span matListItemTitle>الرابط صالح لمدة 24 ساعة</span>
            <span matListItemLine>يجب استخدام رابط إعادة التعيين خلال 24 ساعة من استلامه</span>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>security</mat-icon>
            <span matListItemTitle>حماية حسابك</span>
            <span matListItemLine>لا تشارك رابط إعادة التعيين مع أي شخص</span>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>email</mat-icon>
            <span matListItemTitle>البريد الإلكتروني الصحيح</span>
            <span matListItemLine>تأكد من إدخال البريد الإلكتروني المرتبط بحسابك</span>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>help</mat-icon>
            <span matListItemTitle>مشاكل في الاستلام؟</span>
            <span matListItemLine>إذا لم تستلم البريد، تحقق من البريد العشوائي أو حاول مرة أخرى</span>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
</div>