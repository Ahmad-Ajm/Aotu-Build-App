# قوالب BRD ضمن Legacy Template

> هذه القوالب موجّهة لاستخدام الذكاء الاصطناعي داخل المشروع لتوليد مستندات BRD (Business Requirements Document) عربية،  
> مع الحفاظ على أسماء التقنيات، الـ APIs، الجداول، والأدوات باللغة الإنجليزية.  
> لا تقم بإضافة محتوى `.info/prd/مقطع ثابت.md` داخل القوالب؛ سيتم إلحاقه تلقائيًا في نهاية أي PRD يولَّد.

## كيف يتم توليد BRD؟

باختصار، توليد BRD يتم يدويًا عند الطلب عبر رول مخصص، وليس تلقائيًا ضمن المراحل 0–7:

1. **تأكد من جاهزية المشروع للتوليد**:
   - أن تكون مرحلة استخراج الميزات من الكود مكتملة،  
     مع وجود مؤشر مثل `features-from-code: done` في `.info/progress.md` أو داخل `.info/17-project/features-map.md`.
   - أن تكون المواصفات الأساسية في `.info/*` موجودة بالحد الأدنى (الرؤية، النطاق، المتطلبات…).
2. **اختر نوع الـ BRD الذي تريده**:
   - `brd-dev` لشركة تطوير / فريق تقني منفّذ.
   - `brd-client` للعميل / الإدارة.
   - `brd-simple` نسخة مبسّطة.
   - `brd-tech` نسخة تقنية عالية التفاصيل.
3. **استدعِ رول التوليد يدويًا**:
   - استخدم الكوماند المقترح: `/brd.generate`.
   - حدّد نوع القالب المطلوب (مثلاً: `template = brd-dev`).
4. **تفاعل مع أسئلة الذكاء (إن وُجدت فراغات)**:
   - الرول `role-prd-generator` يقرأ من `.info/*` و`features-map.md`،
   - وإذا وجد نقصًا حرجًا في قسم معيّن، يطرح عليك أسئلة قصيرة لاستكماله.
5. **استلام ملف الـ BRD بصيغة Markdown**:
   - يتم إنشاء ملف مثل: `brd/<project-name>-brd-dev.md` يحتوي على النص الكامل (بدون المقطع الثابت).
6. **تحويله إلى Word عند الحاجة**:
   - باستخدام سكربت:  
     `python .cursor/word/md_to_docx.py prd\<project-name>-prd-dev.md prd\<project-name>-prd-dev.docx`
7. **إلحاق المقطع الثابت تلقائيًا**:
   - في خطوة أتمتة/أداة لاحقة، يتم إلحاق محتوى `.info/prd/مقطع ثابت.md` في نهاية ملف الـ BRD (Markdown أو Word)،  
     دون الحاجة لإضافته يدويًا داخل القوالب أو أثناء التوليد.

## الهدف من مجلد `.info/prd/`

هذا المجلد يحتوي على قوالب BRD جاهزة تساعد الذكاء على توليد عروض فنية / مستندات متطلبات  
بأشكال مختلفة حسب الجمهور المستهدف:

- `prd-dev-template.md`: قالب موجه **لشركة تطوير / فريق تقني منفّذ** (لقالب BRD مخصّص للمطورين).
- `prd-client-template.md`: قالب موجه **للعميل / الإدارة** (لقالب BRD مخصّص للعميل).
- `prd-simple-template.md`: قالب **مبسّط وقصير** للاستخدامات الداخلية السريعة (BRD مبسّط).
- `prd-tech-template.md`: قالب **تقني عالي التفاصيل** لشركات تقنية تهتم بالمعمارية والأدوات (BRD تقني).

جميع القوالب مكتوبة بـ Markdown، بالعربية، مع المصطلحات التقنية بالإنجليزية.

---

## شروط توليد BRD

قبل توليد أي BRD، يجب أن يتحقق الشرطان التاليان:

1. **اكتمال خريطة الميزات من الكود على الأقل**  
   - يجب أن تكون مرحلة استخراج الميزات من الكود قد نُفِّذت،  
   - وأن يكون ملف `.info/17-project/features-map.md` محدثًا بحيث يعكس الميزات المستخرجة من الكود.
   - يُفضَّل وجود إشارة في `features-map.md` أو في `.info/progress.md` مثل:
     - `features-from-code: done`

2. **توفر الحد الأدنى من المواصفات** في:
   - `.info/00-vision/vision.md`
   - `.info/01-scope/scope.md`
   - `.info/02-requirements/*`
   - وأي ملفات أخرى ذات صلة (مثل `03-users`, `04-domain`, `05-architecture` حسب الحاجة).

إذا لم تكن خريطة الميزات من الكود مكتملة، يجب أن يُخبِر الذكاء المستخدم  
بشكل صريح: أنه لا يمكن توليد PRD قبل إنهاء مرحلة استخراج الميزات من الكود.

---

## أنواع القوالب ومتى تُستخدم

### 1. قالب `brd-dev` – موجه لشركات التطوير

- الملف: `.info/prd/prd-dev-template.md`
- **الجمهور**: شركة تطوير خارجية، أو فريق تنفيذ تقني.
- **النبرة**: تقنية/تنفيذية، تشرح نطاق العمل، المكونات، وخطة التنفيذ بشكل واضح.
- **يناسب**:
  - عروض فنية لمناقصات تطوير.
  - اتفاقيات تنفيذ بين فريق منتج وفريق تقني.

### 2. قالب `brd-client` – موجه للعميل

- الملف: `.info/prd/prd-client-template.md`
- **الجمهور**: صاحب المشروع، الإدارة، أو جهة غير تقنية.
- **النبرة**: تركيز على الأهداف والقيمة، مع تبسيط التفاصيل التقنية.
- **يناسب**:
  - العروض الرسمية للعميل.
  - توثيق نطاق العمل المتفق عليه (MVP / Releases).

### 3. قالب `brd-simple` – BRD مبسّط

- الملف: `.info/prd/prd-simple-template.md`
- **الجمهور**: الفريق الداخلي، مشاريع صغيرة، أفكار أولية.
- **النبرة**: مختصرة جدًا، تركّز على الفكرة الأساسية والمتطلبات الرئيسية.
- **يناسب**:
  - توثيق سريع لمشروع جديد.
  - مذكرات داخلية قبل الدخول في تفاصيل كاملة.

### 4. قالب `brd-tech` – BRD تقني عالي المستوى

- الملف: `.info/prd/prd-tech-template.md`
- **الجمهور**: شركة تقنية أو فريق هندسي يهتم بالتفاصيل والـ Stack.
- **النبرة**: تقنية ثقيلة، مليئة بالمصطلحات والأدوات بالإنجليزية مع شرح عربي.
- **يناسب**:
  - توثيق معمارية نظام بالتفصيل.
  - مشاريع تحتاج اتفاق واضح على التقنيات والأدوات والـ DevOps.

---

## كيفية استخدام القوالب مع أدوات Word

1. يختار المستخدم نوع القالب المناسب (`brd-dev` / `brd-client` / `brd-simple` / `brd-tech`).
2. يستدعي رول/كوماند توليد BRD (مثلاً: `/brd.generate`) ويحدد نوع القالب المطلوب.
3. يتأكد الذكاء أولًا من:
   - أن ميزات الكود مستخرجة وموجودة في `.info/17-project/features-map.md`.
   - أن المواصفات الأساسية في `.info/*` مكتملة بالحد الأدنى.
4. يقوم الذكاء بقراءة القالب من `.info/prd/...-template.md`,  
   وملء أقسامه من المواصفات المتوفرة، مع طرح أسئلة للمستخدم عند وجود نقص.
5. يحفظ الناتج في ملف مثل:
   - `brd/<project-name>-brd-dev.md`
6. بعد ذلك، يمكن تشغيل سكربت التحويل إلى وورد:

```powershell
python .cursor/word/md_to_docx.py brd\<project-name>-brd-dev.md brd\<project-name>-brd-dev.docx
```

7. نظام/أتمتة التوليد يقوم في النهاية بإلحاق محتوى `.info/prd/مقطع ثابت.md`  
   في نهاية ملف الـ BRD (Markdown أو Word)، **بدون تكرار محتواه داخل القالب نفسه**.

---



## ملاحظة حول الرول / الكوماند

يوجد بالفعل رول مخصص لتوليد BRD:

- ملف الرول: `.cursor/roles/role-prd-generator.md`
- الكوماند المقترح لاستدعائه: `/brd.generate`

ويقوم هذا الرول بوصف وتنفيذ الآتي:

- شروط البدء (خريطة الميزات من الكود مكتملة مثل `features-from-code: done`).
- طريقة اختيار القالب المناسب (`brd-dev` / `brd-client` / `brd-simple` / `brd-tech`).
- الملفات التي يقرأ منها المواصفات داخل `.info/*` و`.info/17-project/features-map.md`.
- كيفية استخدام قوالب `.info/prd/*.md` وإلحاق `.info/prd/مقطع ثابت.md` في نهاية كل BRD يتم توليده.
